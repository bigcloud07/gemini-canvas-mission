<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IceBreaker</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* ê¸°ë³¸ í°íŠ¸ ë° ì„ íƒ ì˜ì—­ ìƒ‰ìƒ ì§€ì • (Reactì˜ selection:bg-indigo-100 ëŒ€ì²´) */
        ::selection {
            background-color: #e0e7ff; /* indigo-100 */
        }
    </style>
</head>
<body class="min-h-screen bg-slate-50 text-slate-800 font-sans pb-20">

    <!-- í—¤ë” -->
    <header class="pt-12 pb-8 px-6 text-center max-w-md mx-auto">
        <div class="inline-flex items-center justify-center p-3 bg-indigo-500 text-white rounded-2xl mb-4 shadow-lg shadow-indigo-200">
            <i data-lucide="message-circle" class="w-7 h-7"></i>
        </div>
        <h1 class="text-3xl font-extrabold tracking-tight text-slate-900 mb-2">
            IceBreaker <span class="text-indigo-500">ğŸ§Š</span>
        </h1>
        <p class="text-slate-500 font-medium">ì–´ìƒ‰í•œ ì¹¨ë¬µì„ ê¹¨ëŠ” ìŠ¤ëª°í†¡ ì¹˜íŠ¸í‚¤</p>
    </header>

    <main class="max-w-md mx-auto px-4 space-y-6">
        
        <!-- ì¹´í…Œê³ ë¦¬ ì„ íƒ -->
        <section>
            <div class="flex items-center justify-between mb-3 px-1">
                <h2 class="text-sm font-bold text-slate-400 uppercase tracking-wider">ëŒ€í™” ì£¼ì œ ì„ íƒ</h2>
            </div>
            <div class="flex flex-col gap-2">
                <!-- ì¼ë°˜ ì¹´í…Œê³ ë¦¬ ê·¸ë¦¬ë“œ -->
                <div id="categories-grid" class="grid grid-cols-6 gap-2">
                    <!-- JSë¡œ ë™ì  ë Œë”ë§ ë¨ -->
                </div>
                
                <!-- ì£¼ì œ ë¯¹ìŠ¤ ë²„íŠ¼ -->
                <button
                    id="btn-mix"
                    class="w-full flex items-center justify-center gap-2 p-3.5 rounded-2xl border-2 transition-all duration-200"
                    onclick="generateTopic('mix')"
                >
                    <i data-lucide="shuffle" id="icon-mix" class="w-5 h-5"></i>
                    <span class="text-sm font-bold">ì£¼ì œ ë¯¹ìŠ¤ (Mix)</span>
                </button>
            </div>
        </section>

        <!-- ê²°ê³¼ ì¹´ë“œ -->
        <section class="relative mt-8">
            <div id="result-card" class="bg-white rounded-3xl p-6 shadow-xl shadow-slate-200/60 border border-slate-100 transition-all duration-400 transform opacity-0 scale-95 translate-y-4">
                
                <div class="flex justify-between items-start mb-4">
                    <span id="topic-badge" class="text-xs font-bold px-3 py-1 rounded-full bg-opacity-20">
                        <!-- ì¹´í…Œê³ ë¦¬ ì´ë¦„ -->
                    </span>
                    
                    <button 
                        onclick="handleCopy()"
                        class="text-slate-400 hover:text-indigo-500 transition-colors p-1"
                        title="ì§ˆë¬¸ ë³µì‚¬í•˜ê¸°"
                    >
                        <span id="copy-icon-wrap">
                            <i data-lucide="copy" class="w-[18px] h-[18px]"></i>
                        </span>
                    </button>
                </div>

                <!-- í•µì‹¬ ì§ˆë¬¸ -->
                <h3 id="topic-question" class="text-xl sm:text-2xl font-bold leading-snug text-slate-800 mb-6">
                    <!-- ì§ˆë¬¸ ë‚´ìš© -->
                </h3>

                <!-- ëŒ€í™” ì˜ˆì‹œ (ë§í’ì„  ìŠ¤íƒ€ì¼) -->
                <div class="bg-slate-50 rounded-2xl p-4 border border-slate-100 relative">
                    <div class="absolute -top-3 left-4 bg-indigo-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-1 shadow-sm">
                        <i data-lucide="sparkles" class="w-[10px] h-[10px]"></i> ìì—°ìŠ¤ëŸ¬ìš´ ì˜ˆì‹œ
                    </div>
                    <p id="topic-example" class="text-sm text-slate-600 leading-relaxed pt-1">
                        <!-- ì˜ˆì‹œ ë‚´ìš© -->
                    </p>
                </div>
                
            </div>
        </section>

        <!-- í•˜ë‹¨ ìƒì„± ë²„íŠ¼ (í”Œë¡œíŒ… ìŠ¤íƒ€ì¼) -->
        <div class="fixed bottom-6 left-0 right-0 px-4 max-w-md mx-auto z-10">
            <button
                id="btn-refresh"
                onclick="refreshTopic()"
                class="w-full bg-slate-900 hover:bg-slate-800 text-white font-bold text-lg py-4 rounded-full shadow-xl shadow-slate-900/20 flex items-center justify-center gap-2 transition-all active:scale-95 disabled:opacity-70"
            >
                <i data-lucide="refresh-cw" id="icon-refresh" class="w-5 h-5"></i>
                <span id="refresh-text">ìƒˆë¡œ ë½‘ê¸°</span>
            </button>
        </div>

    </main>

    <script>
        // --- ë°ì´í„° êµ¬ì„± ---
        const CATEGORIES = {
            hobby: {
                id: 'hobby', name: 'ì·¨ë¯¸/ê´€ì‹¬ì‚¬', icon: 'headphones',
                color: 'bg-indigo-100 text-indigo-600 border-indigo-200',
                activeColor: 'bg-indigo-500 text-white shadow-indigo-200',
                items: [
                    { q: "ìš”ì¦˜ ì£¼ë§ì´ë‚˜ ì‰¬ëŠ” ë‚ ì—” ì£¼ë¡œ ì–´ë–¤ ê±¸ í•˜ë©° ì‹œê°„ì„ ë³´ë‚´ì‹œë‚˜ìš”?", ex: "ì €ëŠ” ìš”ì¦˜ í™ˆë² ì´í‚¹ì— ë¹ ì¡Œê±°ë“ ìš”. í˜¹ì‹œ ìµœê·¼ì— ìƒˆë¡­ê²Œ ì‹œì‘í•´ë³¸ ì·¨ë¯¸ ìˆìœ¼ì„¸ìš”?" },
                    { q: "ìœ íŠœë¸Œë‚˜ ë„·í”Œë¦­ìŠ¤ì—ì„œ ì œì¼ ì¦ê²¨ë³´ëŠ” ì±„ë„/ì¥ë¥´ê°€ ë­ì˜ˆìš”?", ex: "ì•Œê³ ë¦¬ì¦˜ì´ ë§¨ë‚  ë™ë¬¼ ì˜ìƒë§Œ ë„ì›Œì£¼ëŠ”ë°, í˜¹ì‹œ ë‚˜ë§Œ ì•„ëŠ” ìˆ¨ì€ ê¿€ì¼ ì±„ë„ ìˆë‚˜ìš”?" },
                    { q: "ëˆê³¼ ì‹œê°„ì´ ë¬´í•œëŒ€ë¼ë©´, ê°€ì¥ ë¨¼ì € ë°°ì›Œë³´ê³  ì‹¶ì€ ê²Œ ìˆë‚˜ìš”?", ex: "ì €ëŠ” ìŠ¤ì¿ ë²„ë‹¤ì´ë¹™ì„ ì œëŒ€ë¡œ ë°°ì›Œë³´ê³  ì‹¶ì–´ìš”. í‰ì†Œì— ê¼­ í•´ë³´ê³  ì‹¶ì—ˆë˜ ë¡œë§ ê°™ì€ ê²Œ ìˆë‚˜ìš”?" }
                ]
            },
            news: {
                id: 'news', name: 'ìµœì‹  íŠ¸ë Œë“œ', icon: 'sparkles',
                color: 'bg-blue-100 text-blue-600 border-blue-200',
                activeColor: 'bg-blue-500 text-white shadow-blue-200',
                items: [
                    { q: "ìµœê·¼ì— ë³¸ ë‰´ìŠ¤ë‚˜ ì†Œì‹ ì¤‘ì— ê°€ì¥ ì¶©ê²©ì ì´ê±°ë‚˜ í¥ë¯¸ë¡œì› ë˜ ê²Œ ìˆë‚˜ìš”?", ex: "ì–´ì œ ëœ¬ AI ë‰´ìŠ¤ ë³´ì…¨ì–´ìš”? ì„¸ìƒì´ ë„ˆë¬´ ë¹¨ë¦¬ ë³€í•˜ëŠ” ê²ƒ ê°™ì€ë°, ì–´ë–»ê²Œ ìƒê°í•˜ì„¸ìš”?" },
                    { q: "ìš”ì¦˜ íŒì—…ìŠ¤í† ì–´ë‚˜ í•«í”Œ ì—„ì²­ ë§ë˜ë°, ìµœê·¼ì— ê°€ë³¸ ê³³ ì¤‘ì— ê´œì°®ì•˜ë˜ ê³³ ìˆë‚˜ìš”?", ex: "ì„±ìˆ˜ë™ ìª½ì— ì¬ë°ŒëŠ” ê³³ì´ ë§ì´ ìƒê¸°ë”ë¼ê³ ìš”. ì‚¬ëŒ ë§ì€ ê³³ ê°€ëŠ” ê±° ì¢‹ì•„í•˜ì‹œëŠ” í¸ì¸ê°€ìš”?" },
                    { q: "ìš”ì¦˜ ìœ í–‰í•˜ëŠ” ë°ˆ(Meme)ì´ë‚˜ ì‹ ì¡°ì–´ ì¤‘ì— ìì£¼ ì“°ì‹œëŠ” ê±° ìˆì–´ìš”?", ex: "ì €ëŠ” ì•„ì§ë„ 'ëŸ­í‚¤ë¹„í‚¤' ì´ëŸ¬ê³  ìˆëŠ”ë°, ìš”ì¦˜ ìœ í–‰í•˜ëŠ” ê±´ ë­˜ê¹Œìš”? ğŸ˜…" }
                ]
            },
            life: {
                id: 'life', name: 'ì¼ìƒ/ê²½í—˜', icon: 'coffee',
                color: 'bg-green-100 text-green-600 border-green-200',
                activeColor: 'bg-green-500 text-white shadow-green-200',
                items: [
                    { q: "ì˜¤ëŠ˜ í•˜ë£¨ ì¤‘ ê°€ì¥ ê¸°ë¶„ ì¢‹ì•˜ë˜ ì†Œì†Œí•œ ìˆœê°„ì€ ì–¸ì œì˜€ë‚˜ìš”?", ex: "ì €ëŠ” ì•„ì¹¨ì— ì»¤í”¼ í•œ ì” ë”± ë§ˆì‹¤ ë•Œê°€ ì œì¼ ì¢‹ë”ë¼ê³ ìš”. ì˜¤ëŠ˜ í•˜ë£¨ ì–´ë– ì…¨ì–´ìš”?" },
                    { q: "ì‚´ë©´ì„œ í•´ë³¸ ìµœê³ ì˜ ì§€ë¦„(ì†Œë¹„)ì€ ì–´ë–¤ ê±°ì˜€ë‚˜ìš”?", ex: "ìµœê·¼ì— ë¬´ì„  í—¤ë“œí° ìƒ€ëŠ”ë° ì‚¶ì˜ ì§ˆì´ ë‹¬ë¼ì¡Œì–´ìš”! ì™„ì „ ì¶”ì²œí•˜ëŠ” ì¸ìƒí…œ ìˆìœ¼ì‹ ê°€ìš”?" },
                    { q: "ì¶œí‡´ê·¼(ë“±í•˜êµ) ì‹œê°„ì—” ì£¼ë¡œ ë­ í•˜ë©´ì„œ ì‹œê°„ ë³´ë‚´ì„¸ìš”?", ex: "ì €ëŠ” ë³´í†µ íŒŸìºìŠ¤íŠ¸ ë“£ëŠ”ë°, í˜¹ì‹œ ì´ë™í•  ë•Œ ë“£ê¸° ì¢‹ì€ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ìˆë‚˜ìš”?" }
                ]
            },
            travel: {
                id: 'travel', name: 'ì—¬í–‰/ë¬¸í™”', icon: 'globe',
                color: 'bg-teal-100 text-teal-600 border-teal-200',
                activeColor: 'bg-teal-500 text-white shadow-teal-200',
                items: [
                    { q: "ì§€ê¸ˆ ë‹¹ì¥ ë¹„í–‰ê¸° í‹°ì¼“ì„ ëŠì„ ìˆ˜ ìˆë‹¤ë©´ ì–´ë””ë¡œ ê°€ê³  ì‹¶ìœ¼ì„¸ìš”?", ex: "ì €ëŠ” í•œ ë‹¬ ì‚´ê¸°ë¡œ ì¹˜ì•™ë§ˆì´ ê°€ë³´ëŠ” ê²Œ ë¡œë§ì´ì—ìš”. íœ´ì–‘ì§€ë‘ ë„ì‹œ ì¤‘ì— ì–´ë”œ ë” ì„ í˜¸í•˜ì„¸ìš”?" },
                    { q: "ì§€ê¸ˆê¹Œì§€ ê°€ë³¸ ì—¬í–‰ì§€ ì¤‘ì—ì„œ ì£¼ë³€ì— ì œì¼ ì¶”ì²œí•˜ê³  ì‹¶ì€ ê³³ì´ ìˆë‹¤ë©´ìš”?", ex: "ìƒê°ë§Œ í•´ë„ ê¸°ë¶„ ì¢‹ì•„ì§€ëŠ” ì—¬í–‰ì§€ê°€ ìˆë‚˜ìš”? ì €ëŠ” ìŠ¤ìœ„ìŠ¤ í’ê²½ì„ ìŠì„ ìˆ˜ê°€ ì—†ì–´ìš”." },
                    { q: "ì—¬í–‰ ê°ˆ ë•Œ ë¬´ì¡°ê±´ ê³„íšì„ ì² ì €í•˜ê²Œ ì„¸ìš°ëŠ” í¸(J)ì¸ê°€ìš”, ë°œê¸¸ ë‹¿ëŠ” ëŒ€ë¡œ(P)ì¸ê°€ìš”?", ex: "ì €ëŠ” ì™„ì „ ë¬´ê³„íšìœ¼ë¡œ ê°€ì„œ í˜„ì§€ ë§›ì§‘ ì°¾ëŠ” ê±¸ ì¢‹ì•„í•˜ëŠ”ë°, í˜¹ì‹œ ì—¬í–‰ ìŠ¤íƒ€ì¼ì´ ì–´ë– ì„¸ìš”?" }
                ]
            },
            food: {
                id: 'food', name: 'ìŒì‹/ìš”ë¦¬', icon: 'pizza',
                color: 'bg-orange-100 text-orange-600 border-orange-200',
                activeColor: 'bg-orange-500 text-white shadow-orange-200',
                items: [
                    { q: "í‰ìƒ í•œ ê°€ì§€ ìŒì‹ë§Œ ë¨¹ê³  ì‚´ì•„ì•¼ í•œë‹¤ë©´ ì–´ë–¤ ê±¸ ê³ ë¥´ì‹œê² ì–´ìš”?", ex: "ì €ëŠ” ì§„ì§œ ë–¡ë³¶ì´ ì—†ì´ëŠ” ëª» ì‚´ ê²ƒ ê°™ì•„ìš”. ì ˆëŒ€ í¬ê¸° ëª»í•˜ëŠ” ì†Œìš¸í‘¸ë“œ ìˆìœ¼ì‹ ê°€ìš”?" },
                    { q: "ë‚˜ë§Œ ì•„ëŠ” ì° ë§›ì§‘ í•˜ë‚˜ë§Œ ì‚´ì§ ê³µìœ í•´ì£¼ì‹¤ ìˆ˜ ìˆë‚˜ìš”?", ex: "ì €ëŠ” ê³¨ëª©ì— ìˆ¨ì–´ìˆëŠ” ë…¸í¬ ê°ì„±ì„ ì¢‹ì•„í•˜ëŠ”ë°, í‰ì†Œì— ì–´ë–¤ ë¶„ìœ„ê¸° ì‹ë‹¹ì„ ì¢‹ì•„í•˜ì„¸ìš”?" },
                    { q: "ë¯¼íŠ¸ì´ˆì½”, íŒŒì¸ì• í”Œ í”¼ì ê°™ì€ í˜¸ë¶ˆí˜¸ ê°ˆë¦¬ëŠ” ìŒì‹ ì¤‘ì— ì¢‹ì•„í•˜ëŠ” ê±° ìˆìœ¼ì„¸ìš”?", ex: "ì €ëŠ” ë¯¼ì´ˆë‹¨ì´ê±°ë“ ìš”! í˜¹ì‹œ ìŒì‹ ì·¨í–¥ ì¤‘ì— ë‚¨ë“¤ì´ íŠ¹ì´í•˜ë‹¤ê³  í•˜ëŠ” ê±° ìˆë‚˜ìš”?" }
                ]
            },
            mix: {
                id: 'mix', name: 'ì£¼ì œ ë¯¹ìŠ¤ (Mix)', icon: 'shuffle',
                color: 'bg-purple-100 text-purple-600 border-purple-200',
                activeColor: 'bg-purple-500 text-white shadow-purple-200',
                items: [
                    { q: "âœˆï¸ì—¬í–‰ + ğŸ•ìŒì‹ : ì—¬í–‰ì§€ì—ì„œ ìš°ì—°íˆ ë°œê²¬í•œ ìµœê³ ì˜ ì¸ìƒ ë§›ì§‘ì´ ìˆì—ˆë‚˜ìš”?", ex: "í›„ì¿ ì˜¤ì¹´ ë’·ê³¨ëª©ì—ì„œ ì•„ë¬´ë°ë‚˜ ë“¤ì–´ê°”ë˜ ë¼ë©˜ì§‘ì´ ì•„ì§ë„ ìƒê°ë‚˜ìš”. ì—¬í–‰ ê°€ì„œ ë¨¹ì€ ê²ƒ ì¤‘ ìŠì§€ ëª»í•  ìŒì‹ì´ ìˆë‚˜ìš”?" },
                    { q: "â˜•ì¼ìƒ + ğŸ§ì·¨ë¯¸ : í‡´ê·¼(í•˜êµ) í›„ì— ìŠ¤íŠ¸ë ˆìŠ¤ í’€ë ¤ê³  ê¼­ í•˜ëŠ” ë‚˜ë§Œì˜ ì˜ì‹ì´ ìˆë‚˜ìš”?", ex: "ì €ëŠ” ì§‘ì— ì˜¤ìë§ˆì ì¢‹ì•„í•˜ëŠ” ì•„ì´ëŒ ì§ìº  ë³´ë©´ì„œ ë§¥ì£¼ í•œ ìº” í•˜ëŠ” ê²Œ ë‚™ì´ì—ìš”. ìŠ¤íŠ¸ë ˆìŠ¤ ì–´ë–»ê²Œ í‘¸ì„¸ìš”?" },
                    { q: "âœ¨íŠ¸ë Œë“œ + â˜•ì¼ìƒ : ìš”ì¦˜ ì£¼ë³€ì—ì„œ ë‹¤ë“¤ í•˜ê¸¸ë˜ ë‚˜ë„ ëª¨ë¥´ê²Œ ë”°ë¼ í•´ë³¸ ê²Œ ìˆë‚˜ìš”?", ex: "ìµœê·¼ì— ë‘ë°”ì´ ì´ˆì½œë¦¿ ìœ í–‰í•  ë•Œ ì €ë„ ëª¨ë¥´ê²Œ ì¤„ ì„œì„œ ì‚¬ ë¨¹ì—ˆê±°ë“ ìš”. ìœ í–‰ì— ë¯¼ê°í•œ í¸ì´ì‹ ê°€ìš”?" },
                    { q: "ğŸ•ìŒì‹ + ğŸ§ì·¨ë¯¸ : ë‚´ê°€ ì œì¼ ì¢‹ì•„í•˜ëŠ” ìŒì‹ì„ ì§ì ‘ ìš”ë¦¬í•´ë³´ëŠ” í¸ì¸ê°€ìš”, ë¬´ì¡°ê±´ ì‚¬ ë¨¹ëŠ” í¸ì¸ê°€ìš”?", ex: "ì €ëŠ” ìœ íŠœë¸Œ ë³´ê³  ìš”ë¦¬ ë”°ë¼ í•˜ëŠ” ê±¸ ì¢‹ì•„í•˜ëŠ”ë° ë§‰ìƒ ë§›ì€ ì—†ë”ë¼ê³ ìš”. í˜¹ì‹œ ìì‹  ìˆëŠ” ìš”ë¦¬ ìˆìœ¼ì„¸ìš”?" }
                ]
            }
        };

        // ìƒíƒœ ë³€ìˆ˜
        let activeCategory = 'mix';
        let currentTopic = null;
        let isAnimating = false;

        // UI ìš”ì†Œ
        const categoriesGrid = document.getElementById('categories-grid');
        const btnMix = document.getElementById('btn-mix');
        const iconMix = document.getElementById('icon-mix');
        const resultCard = document.getElementById('result-card');
        const topicBadge = document.getElementById('topic-badge');
        const topicQuestion = document.getElementById('topic-question');
        const topicExample = document.getElementById('topic-example');
        const btnRefresh = document.getElementById('btn-refresh');
        const refreshText = document.getElementById('refresh-text');
        const iconRefresh = document.getElementById('icon-refresh');

        // ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ ë Œë”ë§
        function renderCategories() {
            categoriesGrid.innerHTML = '';
            
            Object.values(CATEGORIES).filter(cat => cat.id !== 'mix').forEach((cat, index) => {
                const isActive = activeCategory === cat.id;
                const isTopRow = index < 3;
                
                const btn = document.createElement('button');
                btn.className = `
                    ${isTopRow ? 'col-span-2' : 'col-span-3'}
                    flex flex-col items-center justify-center p-3 rounded-2xl border-2 transition-all duration-200
                    ${isActive 
                        ? `${cat.activeColor} border-transparent shadow-md scale-105` 
                        : `bg-white ${cat.color} hover:bg-slate-50`}
                `;
                btn.onclick = () => generateTopic(cat.id);
                
                btn.innerHTML = `
                    <i data-lucide="${cat.icon}" class="w-5 h-5 ${isActive ? 'mb-1' : 'mb-2 opacity-80'}"></i>
                    <span class="text-xs font-bold">${cat.name}</span>
                `;
                categoriesGrid.appendChild(btn);
            });

            // ë¯¹ìŠ¤ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            const mixCat = CATEGORIES.mix;
            if (activeCategory === 'mix') {
                btnMix.className = `w-full flex items-center justify-center gap-2 p-3.5 rounded-2xl border-2 transition-all duration-200 ${mixCat.activeColor} border-transparent shadow-md scale-[1.02]`;
                iconMix.classList.remove('opacity-80');
            } else {
                btnMix.className = `w-full flex items-center justify-center gap-2 p-3.5 rounded-2xl border-2 transition-all duration-200 bg-white ${mixCat.color} hover:bg-slate-50`;
                iconMix.classList.add('opacity-80');
            }

            // Lucide ì•„ì´ì½˜ ë‹¤ì‹œ ë Œë”ë§
            lucide.createIcons();
        }

        // ì§ˆë¬¸ ìƒì„±
        function generateTopic(categoryId) {
            if (isAnimating) return;
            isAnimating = true;
            activeCategory = categoryId;
            btnRefresh.disabled = true;
            iconRefresh.classList.add('animate-spin');

            // UI ìƒíƒœ ì¦‰ì‹œ ì—…ë°ì´íŠ¸ (ë²„íŠ¼ ìƒ‰ìƒ ë“±)
            renderCategories();
            refreshText.innerText = `${CATEGORIES[categoryId].name} ìƒˆë¡œ ë½‘ê¸°`;

            // ì¹´ë“œ ìˆ¨ê¸°ê¸° ì• ë‹ˆë©”ì´ì…˜
            resultCard.classList.remove('opacity-100', 'scale-100', 'translate-y-0');
            resultCard.classList.add('opacity-0', 'scale-95', 'translate-y-4');

            setTimeout(() => {
                const items = CATEGORIES[categoryId].items;
                let randomIdx;
                
                // ì´ì „ ì§ˆë¬¸ê³¼ ì¤‘ë³µë˜ì§€ ì•Šë„ë¡ ì²˜ë¦¬
                do {
                    randomIdx = Math.floor(Math.random() * items.length);
                } while (currentTopic && items.length > 1 && items[randomIdx].q === currentTopic.q);
                
                currentTopic = items[randomIdx];

                // DOM ë°ì´í„° ì—…ë°ì´íŠ¸
                const cat = CATEGORIES[categoryId];
                topicBadge.className = `text-xs font-bold px-3 py-1 rounded-full ${cat.color} bg-opacity-20`;
                topicBadge.innerText = cat.name;
                topicQuestion.innerText = currentTopic.q;
                topicExample.innerText = `"${currentTopic.ex}"`;

                // ì¹´ë“œ ë³´ì´ê¸° ì• ë‹ˆë©”ì´ì…˜
                resultCard.classList.remove('opacity-0', 'scale-95', 'translate-y-4');
                resultCard.classList.add('opacity-100', 'scale-100', 'translate-y-0');
                
                isAnimating = false;
                btnRefresh.disabled = false;
                iconRefresh.classList.remove('animate-spin');
            }, 400);
        }

        // ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ í•¸ë“¤ëŸ¬
        function refreshTopic() {
            generateTopic(activeCategory);
        }

        // ë³µì‚¬ ê¸°ëŠ¥
        function handleCopy() {
            if (!currentTopic) return;
            
            const textArea = document.createElement("textarea");
            textArea.value = currentTopic.q;
            document.body.appendChild(textArea);
            textArea.select();
            
            try {
                document.execCommand('copy');
                
                // ë³µì‚¬ ì„±ê³µ ì•„ì´ì½˜ í”¼ë“œë°±
                const copyIconWrap = document.getElementById('copy-icon-wrap');
                copyIconWrap.innerHTML = '<i data-lucide="check-circle-2" class="text-green-500 w-[18px] h-[18px]"></i>';
                lucide.createIcons();
                
                setTimeout(() => {
                    copyIconWrap.innerHTML = '<i data-lucide="copy" class="w-[18px] h-[18px]"></i>';
                    lucide.createIcons();
                }, 2000);
            } catch (err) {
                console.error('Failed to copy', err);
            }
            
            document.body.removeChild(textArea);
        }

        // ì´ˆê¸°í™”
        window.onload = () => {
            lucide.createIcons();
            generateTopic('mix');
        };
    </script>
</body>
</html>